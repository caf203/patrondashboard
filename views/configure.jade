doctype html
html(lang='en')
  head
    meta(http-equiv='Content-Type', content='text/html; charset=UTF-8')
    // Meta, title, CSS, favicons, etc.
    meta(charset='utf-8')
    meta(http-equiv='X-UA-Compatible', content='IE=edge')
    meta(name='viewport', content='width=device-width, initial-scale=1')
    title #{user.username} | Logger Dashboard
    // Bootstrap
    link(href='/vendors/bootstrap/dist/css/bootstrap.min.css', rel='stylesheet')
    // Font Awesome
    link(href='/vendors/font-awesome/css/font-awesome.min.css', rel='stylesheet')
    // NProgress
    link(href='/vendors/nprogress/nprogress.css', rel='stylesheet')
    // iCheck
    link(href='/vendors/iCheck/skins/flat/green.css', rel='stylesheet')
    // bootstrap-progressbar
    link(href='/vendors/bootstrap-progressbar/css/bootstrap-progressbar-3.3.4.min.css', rel='stylesheet')
    // JQVMap
    link(href='/vendors/jqvmap/dist/jqvmap.min.css', rel='stylesheet')
    // bootstrap-daterangepicker
    link(href='/vendors/bootstrap-daterangepicker/daterangepicker.css', rel='stylesheet')
    // Custom Theme Style
    link(href='/build/css/custom.min.css', rel='stylesheet')
    #popup.modal-dialog.modal-sm(style="position: absolute; z-index: 1000000; top: 50%; left: 50%; transform: translate(-50%, -50%);")
      .modal-content
        .modal-header
          button.close(type='button', data-dismiss='modal', aria-label='Close')#close
            span(aria-hidden='true')#close Ã—
          h4.modal-title Configuration Response
        .modal-body
          p#message-content
            | Oof
        .modal-footer#close
          button.btn.btn-default(type='button', data-dismiss='popup', onclick="hidePopup()")#close Close
  body.nav-md
    .container.body
      .main_container
        .col-md-3.left_col
          .left_col.scroll-view
            .navbar.nav_title(style='border: 0;')
              a.site_title(href='/')
                img(src='/images/loggericon.png')
                span  Logger
            .clearfix
            // menu profile quick info
            .profile.clearfix
              .profile_pic
                img.img-circle.profile_img(src='#{user.avatarURL}', alt='...')
              .profile_info
                span Logged in as,
                h2 #{user.username}
            // /menu profile quick info
            br
            // sidebar menu
            #sidebar-menu.main_menu_side.hidden-print.main_menu
              .menu_section
                h3 General
                ul.nav.side-menu
                  li
                    a
                      i.fa.fa-home
                      |  Home 
                      span.fa.fa-chevron-down
                    ul.nav.child_menu
                      li
                        a(href='/') Home
                      li
                        a(href='/serverselector') Server selector
                      li
                        a(href='/lastnames') Your last names
                  li
                    a(href='https://discordapp.com/oauth2/authorize?client_id=298822483060981760&scope=bot&permissions=380065', target='_blank')
                      i.fa.fa-envelope
                      |  Invite
                  li
                    a(href='https://www.patreon.com/logger', target='_blank')
                      i.fa.fa-hand-peace-o
                      |  Patreon
                  li
                    a(href='https://discord.gg/ed7Gaa3', target='_blank')
                      i.fa.fa-life-ring
                      |  Discord Server
            // /sidebar menu
            // /menu footer buttons
            .sidebar-footer.hidden-small
              a(data-toggle='tooltip', data-placement='top', title='Logout', href='/logout', style="width: 100%")
                span.glyphicon.glyphicon-off(aria-hidden='true')
            // /menu footer buttons
        // top navigation
        .top_nav
          .nav_menu
            nav
              .nav.toggle
                a#menu_toggle
                  i.fa.fa-bars
              ul.nav.navbar-nav.navbar-right
                li
                  a.user-profile.dropdown-toggle(href='javascript:;', data-toggle='dropdown', aria-expanded='false')
                    img(src='#{user.avatarURL}', alt='')
                    | #{user.username} 
                    span.fa.fa-angle-down
                  ul.dropdown-menu.dropdown-usermenu.pull-right
                    li
                      a(href='https://discord.gg/ed7Gaa3') Help
                    li
                      a(href='/logout')
                        i.fa.fa-sign-out.pull-right
                        |  Log Out
                li
                    a(href='https://discordapp.com/oauth2/authorize?client_id=298822483060981760&scope=bot&permissions=380065', target='_blank')
                      i.fa.fa-envelope
                      |  Invite
                li
                  a(href='https://www.patreon.com/logger', target='_blank')
                    i.fa.fa-hand-peace-o
                    |  Patreon
                li
                  a(href='https://discord.gg/ed7Gaa3', target='_blank')
                    i.fa.fa-life-ring
                    |  Discord Server
        .right_col(role='main')
          h1.text-center Configuring #{guildName}:
          h2.text-center Logged in as #{user.username}
          br
          .col-md-6.col-xs-12
            .x_panel
              .x_title
                h2
                  | Channels To Log To 
                ul.nav.navbar-right.panel_toolbox
                  li.pull-right
                    a.collapse-link
                      i.fa.fa-chevron-up
                .clearfix
              .x_content
                form.form-horizontal.form-label-left(onsubmit="return false")#dataform
                  .form-group
                    input(type="hidden", name='guildID', value='#{guildID}', readonly)
                    label.control-label.col-md-3.col-sm-3.col-xs-12 All
                    .col-md-9.col-sm-9.col-xs-12
                      select.select2_single.form-control(tabindex='-1', name='all')
                        option(value='', selected) None
                        - if (selectedChannels.all && selectedChannels.all.id) {
                            option(value=`${selectedChannels.all.id}`, selected) #{selectedChannels.all.name ? selectedChannels.all.name : selectedChannels.all.id}
                        - }
                        - for(let x = 0; x < channels.length; x++) {
                            option(value=`${channels[x].id}`) #{channels[x].name}
                        - }
                    label.control-label.col-md-3.col-sm-3.col-xs-12 Moderation
                    .col-md-9.col-sm-9.col-xs-12
                      select.select2_single.form-control(tabindex='-1', name='mod')
                        option(value='', selected) None
                        - if (selectedChannels.mod && selectedChannels.mod.id) {
                            option(value=`${selectedChannels.mod.id}`, selected) #{selectedChannels.mod.name ? selectedChannels.mod.name : selectedChannels.mod.id}
                        - }
                        - for(let x = 0; x < channels.length; x++) {
                            option(value=`${channels[x].id}`) #{channels[x].name}
                        - }
                    label.control-label.col-md-3.col-sm-3.col-xs-12 Server
                    .col-md-9.col-sm-9.col-xs-12
                      select.select2_single.form-control(tabindex='-1', name='server')
                        option(value='', selected) None
                        - if (selectedChannels.server && selectedChannels.server.id) {
                            option(value=`${selectedChannels.server.id}`, selected) #{selectedChannels.server.name ? selectedChannels.server.name : selectedChannels.server.id}
                        - }
                        - for(let x = 0; x < channels.length; x++) {
                            option(value=`${channels[x].id}`) #{channels[x].name}
                        - }
                    label.control-label.col-md-3.col-sm-3.col-xs-12 Voice
                    .col-md-9.col-sm-9.col-xs-12
                      select.select2_single.form-control(tabindex='-1', name='voice')
                        option(value='', selected) None
                        - if (selectedChannels.voice && selectedChannels.voice.id) {
                            option(value=`${selectedChannels.voice.id}`, selected) #{selectedChannels.voice.name ? selectedChannels.voice.name : selectedChannels.voice.id}
                        - }
                        - for(let x = 0; x < channels.length; x++) {
                            option(value=`${channels[x].id}`) #{channels[x].name}
                        - }
                    label.control-label.col-md-3.col-sm-3.col-xs-12 Messages
                    .col-md-9.col-sm-9.col-xs-12
                      select.select2_single.form-control(tabindex='-1', name='messages')
                        option(value='', selected) None
                        - if (selectedChannels.messages && selectedChannels.messages.id) {
                            option(value=`${selectedChannels.messages.id}`, selected) #{selectedChannels.messages.name ? selectedChannels.messages.name : selectedChannels.messages.id}
                        - }
                        - for(let x = 0; x < channels.length; x++) {
                            option(value=`${channels[x].id}`) #{channels[x].name}
                        - }
                    label.control-label.col-md-3.col-sm-3.col-xs-12 Joins
                    .col-md-9.col-sm-9.col-xs-12
                      select.select2_single.form-control(tabindex='-1', name='joinlog')
                        option(value='', selected) None
                        - if (selectedChannels.joinlog && selectedChannels.joinlog.id) {
                            option(value=`${selectedChannels.all.id}`, selected) #{selectedChannels.joinlog.name ? selectedChannels.joinlog.name : selectedChannels.joinlog.id}
                        - }
                        - for(let x = 0; x < channels.length; x++) {
                            option(value=`${channels[x].id}`) #{channels[x].name}
                        - }
                  .ln_solid
                  .form-group
                    .col-md-9.col-sm-9.col-xs-12.col-md-offset-3.text-center
                      button.btn.btn-primary(type='reset') Reset
                      button.btn.btn-success(type='submit')#submitchannels Submit

          .col-md-6.col-xs-12
            .x_panel
              .x_title
                h2 Modules #[small Hover to see more info]
                ul.nav.navbar-right.panel_toolbox
                  li.pull-right
                    a.collapse-link
                      i.fa.fa-chevron-up
                .clearfix
              .x_content
                form.form-horizontal.form-label-left(onsubmit='return false')#modulesform
                  .form-group
                    input(type="hidden", name='guildID', value='#{guildID}', readonly)
                    label.col-md-3.col-sm-3.col-xs-12.control-label
                      | Checked means 
                      strong enabled.
                    .col-md-9.col-sm-9.col-xs-12
                      each event in toggledEvents
                        - if (!event.disabled) 
                          .checkbox
                            label(data-toggle="tooltip", data-placement="left", title="#{event.tooltip}")
                              input.flat(type='checkbox', name='#{event.name}', checked)
                              |  #{event.name}
                            br
                        - else 
                          .checkbox
                            label(data-toggle="tooltip", data-placement="left", title="#{event.tooltip}")
                              input.flat(title="wew", type='checkbox', name='#{event.name}')
                              |  #{event.name}
                            br
                      .ln_solid
                      .form-group
                        .col-md-9.col-sm-9.col-xs-12.col-md-offset-3.text-center
                          button.btn.btn-primary(type='reset') Reset
                          button.btn.btn-success(type='submit')#submitmodules Submit
          // top tiles
          // /top tiles
        // /page content
        // footer content
        footer
          .pull-right
            | Gentelella - Bootstrap Admin Template by 
            a(href='https://colorlib.com') Colorlib
          .clearfix
    script(src='/vendors/jquery/dist/jquery.min.js')
    script(src='/vendors/bootstrap/dist/js/bootstrap.min.js')
    script(src='/vendors/nprogress/nprogress.js')
    script(src='/vendors/bootstrap-progressbar/bootstrap-progressbar.min.js')
    script(src='/vendors/iCheck/icheck.min.js')
    script(src='/build/js/custom.min.js')
    script(src='/js/jquery.serializejson.js')
    script.
        let modal = document.getElementById('popup')
        let span = document.getElementById('close')
        let message = document.getElementById('message-content')
        let btn = document.getElementById('submitB')
        modal.style.display = "none";
        function hidePopup() {
          modal.style.display = "none"
        }
        span.onclick = hidePopup
        window.onclick = function(event) {
            if (event.target == modal) {
                hidePopup()
            }
        }
        $("#submitchannels").click(function () {
          $.ajax({
                type:'POST',
                url:'http://100.7.25.242:8000/savechannels',
                data: $("#dataform").serializeJSON(),
                success:function(msg) {
                    message.innerHTML = msg.message
                    modal.style.display = 'block'
                },
                error:function (msg) {
                  console.log(msg)
                    message.innerHTML = msg.message
                    modal.style.display = 'block'
                }
            })
        })

        $("#submitmodules").click(function () {
          $.ajax({
                type:'POST',
                url:'http://100.7.25.242:8000/savemodules',
                data: $("#modulesform").serializeJSON(),
                success:function(msg) {
                    message.innerHTML = msg.message
                    modal.style.display = 'block'
                },
                error:function (msg) {
                    message.innerHTML = msg.message
                    modal.style.display = 'block'
                }
            })
        })

